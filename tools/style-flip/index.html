<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>Style Flip</title>
    <base id="base" href="" target="_blank">
    <link href="css/base.css" rel="stylesheet" type="text/css"/>
    <link id="dark_theme" href="css/dark.css" rel="alternate stylesheet" type="text/css" title="Dark"/>
    <link id="light_theme" href="css/light.css" rel="alternate stylesheet" type="text/css" title="Light" disabled/>
</head>
<body>
    <div>
        <article>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam pulvinar ex vulputate, ultricies ligula non, vulputate dolor. Donec a vestibulum risus. Aliquam erat volutpat. Nulla elementum, ex a porttitor facilisis, urna felis efficitur tellus, sed pulvinar lectus arcu ac leo. Duis eu magna ultricies, scelerisque nibh id, aliquet dolor. Suspendisse facilisis lectus nec arcu vestibulum malesuada. Fusce ultrices sollicitudin pretium. In id commodo massa, non luctus justo. Quisque nunc nulla, iaculis et hendrerit ac, porta a nisl. In eget neque id massa sollicitudin efficitur. Nulla eget urna urna. Nulla mollis, magna sed volutpat posuere, lectus neque tincidunt tortor, ut imperdiet massa ligula eget eros. Donec quis lectus sit amet nisi eleifend mollis. Curabitur ut mollis libero, in venenatis ante. Nunc vel est sapien.</p>
            <p>Suspendisse pharetra massa ut libero placerat semper. Nam vestibulum in libero id tincidunt. Vestibulum luctus pharetra lectus. Fusce varius sollicitudin ante ut condimentum. Nullam placerat blandit ipsum, sit amet iaculis ante tristique in. Cras lacinia hendrerit dolor, nec tristique lectus tempus in. Sed vel odio eu lorem pharetra interdum. Pellentesque mollis consectetur neque, quis posuere nisi fringilla ac. Vestibulum congue volutpat commodo. Pellentesque gravida, sapien non commodo pharetra, elit lacus lacinia massa, eget vulputate arcu quam at lacus. Suspendisse potenti. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur quis nisl vel dolor dignissim semper eu et nunc. Donec elementum nulla eu mauris efficitur vulputate.</p>
        </article>
    </div>
    <script type="application/javascript">
    (function () {
        function remove(element) {
            element.parentElement.removeChild(element);
        }
        document.addEventListener("keydown", e => {
            if (e.keyCode === 32 && !e.repeat) {
                var html = document.documentElement;

                var back = html.cloneNode(true);
                var front = html.cloneNode(true);

                back.querySelector("#base").href = document.documentURI;
                front.querySelector("#base").href = document.documentURI;

                var bdark = back.querySelector("#dark_theme");
                var blight = back.querySelector("#light_theme");

                var fdark = front.querySelector("#dark_theme");
                var flight = front.querySelector("#light_theme");

                remove(bdark);
                blight.disabled = false;
                blight.rel = "stylesheet";
                fdark.disabled = false;
                fdark.rel = "stylesheet";
                remove(flight);

                //light.disabled = !(dark.disabled = light.disabled);

                document.body.innerHTML = `
                    <div class="theme-container theme-flip">
                        <iframe src="data:text/html;base64,${btoa(back.outerHTML)}" class="theme-side flipped" frameborder="0" scrolling="no"></iframe>
                        <iframe src="data:text/html;base64,${btoa(front.outerHTML)}" class="theme-side" frameborder="0" scrolling="no"></iframe>
                    </div>
                `;
            }
        });
    })();
</script>
</body>
</html>
